<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<title>端午</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no,minimal-ui" />
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<style type="text/css">
		html{
			width: 100%;
			height: 100%;
			font-size: 100px;
			overflow: auto;
		}
		i{
			font-style: normal;
			display: block;
		}
		button{
			border:0px;
		}
		body{
			font-size: 0.14rem;
			margin: 0 auto;
			width: 3.2rem;
			height: 5.04rem;
			max-width: 640px;
			max-height:1008px; 
			overflow: hidden;
			background-color:chocolate;
			text-align: center;
		}
		.hide{
			display: none;
		}
		/*loading*/
		.loading{
			width: 3.2rem;
			height: 5.04rem;
			max-width: 640px;
			max-height:1008px;
			background-color:cornflowerblue;
			overflow: hidden;
		}
		.loading .actors{
			width: 1.2rem;
			height: 0.3rem;
			/*background-color: pink;*/
			margin: 0.5rem auto;
		}
		.loading .theatre{
			width: 1.2rem;
			height: 0.3rem;
		}
		.theatre .actor{
			width: 0.3rem;
			height: 0.3rem;
			float: left;
			/*background-color: gold;*/
			position: relative;
		}
		.actor .acting{
			display: block;
			width: 0.12rem;
			height: 0.12rem;
			border-radius: 50%;
			position: absolute;
			top: 50%;
			left:50%;
			margin-top: -0.06rem;
			margin-left: -0.06rem;
			background-color: yellowgreen;
		}

		.actor .acting:before{
			display: block;
			content: "";
			width: 0.12rem;
			height: 0.12rem;
			border-radius: 50%;
			position: relative;
			top:0;
			left:0;
			background-color: green;
		}
		.showY1{-webkit-animation: showY 1s linear 0s infinite alternate;}
		.showY1:before{-webkit-animation: showX 1s linear -0.33s infinite alternate;}
		.showY2{-webkit-animation: showY 1s linear -0.33s infinite alternate;}
		.showY2:before{-webkit-animation: showX 1s linear -0.66s infinite alternate;}
		.showY3{-webkit-animation: showY 1s linear -0.66s infinite alternate;}
		.showY3:before{-webkit-animation: showX 1s linear -0.1s infinite alternate;}
		.showY4{-webkit-animation: showY 1s linear -1s infinite alternate;}
		.showY4:before{-webkit-animation: showX 1s linear 0s infinite alternate;}
		@-webkit-keyframes showY
			{
				0% {-webkit-transform:scaleY(1);}
				
				100% {-webkit-transform:scaleY(3);}
			}
		@-webkit-keyframes showX
		{
			0% {-webkit-transform:scaleX(1);}
			
			100% {-webkit-transform:scaleX(2);}
		}
		/*main*/
		.main{
			-webkit-transform:translateY(-0rem);
			transform:translateY(-0rem);
			width: 100%;
		}
		.page{
			width: 3.2rem;
			height: 5.04rem;
			max-width: 640px;
			max-height:1008px; 
			overflow: hidden;
			opacity: 0;
			-webkit-transition:all 1s ease 0s;
			transition:all 1s ease 0s;
			-webkit-transform:translateY(10%);
			transform:translateY(10%);
		}
		.page.fadeIn{
			opacity: 1;
			-webkit-transform:translateY(0%);
			transform:translateY(0%);
		}
		
		.page2{position:relative;background-color:tomato;}
		.page3{position:relative;background-color:yellowgreen;}
		.page4{position:relative;background-color:plum;}
		.page5{position:relative;background-color:chocolate;}
		.page6{position:relative;background-color:navy;}
		/*nav*/
		nav{
			width: 100%;
			height: 10px;
			position: fixed;
			top:0;
			left:50%;
			-webkit-transform:translateX(-50%);
			transform:translateX(-50%);
			text-align: center;
			-webkit-box-sizing:border-box;
			box-sizing:border-box;
			z-index: 99999;
		}
		nav .logo{
			width:0.6rem;
			height:0.3rem;
			background-color:skyblue;
			position: absolute;
			top:0;
			left:50%;
			-webkit-transform:translateX(-50%);
			transform:translateX(-50%);
		}
		/*cover*/
		.cover{
			position: fixed;
			width: 3.2rem;
			height: 6rem;
			max-width: 640px;
			display: none;
			top:0;
			left:50%;
			-webkit-transform:translateX(-50%); 
			transform:translateX(-50%); 
			background-color:rgba(0,0,0,0.4);
		}
		.cover .inCover{
			width: 1rem;
			height: 1rem;
			line-height: 1rem;
			font-size: 0.3rem;
			text-align: center;
			position: absolute;
			top: 50%;
			left:50%;
			margin-top: -0.5rem;
			margin-left: -0.5rem;
		}
		/*shareCover*/
		.shareCover{
			position: fixed;
			width: 3.2rem;
			height: 6rem;
			max-width: 640px;
			display: none;
			top:0;
			left:50%;
			-webkit-transform:translateX(-50%); 
			transform:translateX(-50%); 
			background-color:rgba(0,0,0,0.8);
		}
		.shareCover .inShareCover{
			width: 2.2rem;
			height: 2.2rem;
			font-size: 0.16rem;
			text-align: left;
			position: absolute;
			left:50%;
			top:1rem;
			margin-left: -1.1rem;
			background-color: #fff;
			border-radius: 3px;

		}
		/*index*/
		.index{
			position: fixed;
			width: 3.2rem;
			height: 6rem;
			max-width: 640px;
			top:0;
			left:50%;
			-webkit-transform:translateX(-50%); 
			transform:translateX(-50%); 
			background-color:skyblue;
		}
		.index .title{
			display: inline-block;
			margin-top:0.8rem;
			height: 0.4rem;
			line-height: 0.4rem;
			font-size: 0.2rem;
			background-color: pink; 
		}
		.index .stage{
			width:2.4rem;
			height: 2.8rem;
			border-radius: 3px;
			background-color: #fff;
			margin:0.3rem auto;
			position: relative;
		}
		.stage .tip{
			width: 0.8rem;
			height: 0.3rem;
			background-color:gold;
			position: absolute;
			top: 0;
			left: 0;
			line-height: 0.3rem;
			border-radius: 3px;
			-webkit-transform-origin:0% 0%;
			transform-origin:0% 0%;
			-webkit-animation: tip 2s ease 0s infinite alternate;
		}
		@-webkit-keyframes tip
		{
			0% {-webkit-transform:scale(1);}
			
			100% {-webkit-transform:scale(2);}
		}
		.stage .riceMan{
			width: 0.8rem;
			height: 0.8rem;
			background-color: yellowgreen;
			position: absolute;
			top:50%;
			left:50%;
			margin-top: -0.4rem;
			margin-left: -0.4rem;
			border-radius: 10%;
			-webkit-animation: riceMan 8s linear 0s infinite ;
		}
		@-webkit-keyframes riceMan
		{
			0% {-webkit-transform:translateX(0%);}
			25% {-webkit-transform:translateX(-100%);}
			75% {-webkit-transform:translateX(100%);}
			100% {-webkit-transform:translateX(0%);}

		}
		/*page1*/
		.page1 .timeOutBar{
			line-height: 0.6rem;
			width: 75%;
			height: 0.3rem;
			background-color: pink;
			margin:0.1rem auto;
			position: relative;
		}
		.page1 .timeOutBar:before{
			display: block;
			content: "0";
			width: 0.1rem;
			height: 0.3rem;
			/*background-color: gold;*/
			position: absolute;
			left:-0.15rem;
			top:0;
			z-index: 999;
		}
		.page1 .timeOutBar:after{
			display: block;
			content: "60";
			width: 0.1rem;
			height: 0.3rem;
			/*background-color: yellowgreen;*/
			position: absolute;
			right:-0.15rem;
			top:0;
			z-index: 999;
		}
		.timebar{
			width: 100%;
			height: 100%;
			background-color:skyblue;
			position: relative;
			overflow: hidden;
		}
		.timer{
			width: 100%;
			height: 100%;
			background-color:pink;
			position: absolute;
			top: 0;
			left: 0;
			margin-left:-2.4rem; 
		}
		.page1 .zongzi{
			width: 70%;
			height: 2rem;
			background-color:yellowgreen;
			margin: 0.1rem auto;
		}
		.page1 .leftHandBtn{
			width: 50%;
			height: 1.6rem;
			background-color: gold;
			float: left;
		}
		.page1 .rightHandBtn{
			width: 50%;
			height: 1.6rem;
			background-color: yellow;
			float: left;
		}
		.page1 h3{
			width: 1.6rem;
			height: 0.6rem;
			margin: 0.7rem auto 0.1rem;
			background-color:pink;
			line-height: 0.6rem;
			font-size: 0.36rem;
		}
		/*page2*/
		.page2 .zongziCartoon{
			width: 2.2rem;
			height: 2.2rem;
			margin: 0.4rem auto 0.3rem;
			background-color: violet;
			border-radius: 3px;
		}
		.page2 .text{
			width: 80%;
			text-align: left;
			margin: 0 auto;
			font-size: 0.16rem;
		}
		.page2 .ufuncodeBtn{
			display: block;
			width: 1rem;
			height: 0.4rem;
			margin: 0.2rem auto;
			background-color:gold;
			border-radius: 3px;
			line-height: 0.4rem;
		}

		.page2 .shareBtn{
			display: block;
			width: 1rem;
			height: 0.4rem;
			margin: 0.1rem auto;
			background-color:yellowgreen;
			border-radius: 3px;
			line-height: 0.4rem;
		}
		/*page3*/
		.page3 .ufuncodeShow{
			width: 2.2rem;
			height: 2.2rem;
			margin: 0.7rem auto 0.3rem;
			background-color: #fff;
			border-radius: 3px;
		}
		.page3 .downloadBtn{
			display: block;
			width: 1rem;
			height: 0.4rem;
			margin: 0.2rem auto;
			background-color:gold;
			border-radius: 3px;
			line-height: 0.4rem;
		}

		.page3 .againBtn{
			display: block;
			width: 1rem;
			height: 0.4rem;
			margin: 0.1rem auto;
			background-color:green;
			border-radius: 3px;
			line-height: 0.4rem;
		}

	</style>

</head>
<body>
	<section class="loading" id="loading">
		<div class="actors">
			<ul class="theatre">
				<li class="actor"><i class="acting showY1"></i></li>
				<li class="actor"><i class="acting showY2"></i></li>
				<li class="actor"><i class="acting showY3"></i></li>
				<li class="actor"><i class="acting showY4"></i></li>
			</ul>
		</div>
	</section>
	<section class="main hide" id="main">
		<div class="page page1" id="page1">
			<h3><span class="second">5</span>'<span class="msecond">0</span>''</h3>
			<div class="timeOutBar"><div class="timebar"><div class="timer"></div></div></div>
			<div class="zongzi">
				<ul>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
				</ul>
			</div>
			<button class="leftHandBtn"></button><button class="rightHandBtn"></button>
		</div>
		<div class="page page2">
			<div class="zongziCartoon"></div>
			<p class="text"></p>
			<button class="ufuncodeBtn">了解U趣码</button>
			<button class="shareBtn">分享给吃货</button>
		</div>
		<div class="page page3">
			<div class="ufuncodeShow"></div>
			<button class="downloadBtn">立即使用U趣码</button>
			<button class="againBtn">不服？再战！</button>
		</div>
	</section>
	<section class="index" id="index">
		<h3 class="title">左手右手包粽子</h3>
		<div class="stage">
			<div class="tip">打我呀!</div>
			<div class="riceMan"></div>
		</div>
	</section>
	<section class="cover" id="cover">
		<div class="inCover"></div>
	</section>
	<section class="shareCover">
		<div class="inShareCover">
			<p>
				五月五，过端午！<br/>端午魔性粽子出没！<br/>点击右上角分享你的成果。
			</p>
		</div>
	</section>
	<nav>
		<div class="logo">logo</div>
	</nav>
	<script type="text/javascript" src="js/zeptoWithFxTouch.min.js"></script>
	<script type="text/javascript" src="js/jweixin-1.0.0.js"></script>
	<script type="text/javascript">
	var $index = $("#index");
	var $main = $("#main");
	var $loading = $("#loading");
	var $cover = $("#cover");
	var $inCover = $(".inCover");
	var $page1 = $("#page1");
	var $page2 = $(".page2");
	var $page3 = $(".page3");
	var $second = $(".second");
	var $msecond = $(".msecond");
	var $leftHandBtn = $(".leftHandBtn");
	var $rightHandBtn = $(".rightHandBtn");
	var $timer = $(".timer");
	var $text = $(".text");
	var $ufuncodeBtn = $(".ufuncodeBtn");
	var $againBtn = $(".againBtn");
	var $shareBtn = $(".shareBtn");
	var $shareCover = $(".shareCover");
	var inCoverText = 3;
	$inCover.html(inCoverText);
	var time5000 = 5000;
	var lock = 1;
	var count = 0;

	function OverText(m) { 
		var mytext;
		this.mytext =  ["5秒包了" + m + "个粽子？？？你是猪吗？！赏你一张U趣码，再战500回合！",
						"5秒包了" + m + "个粽子，你的速度比猪快，获得U趣码鼓励～",
						"5秒包了" + m + "个粽子，速度堪比豺狼虎豹，捕获U趣码一张！",
						"5秒包了" + m + "个粽子，不鸣则已，一鸣惊人！U趣码来抱大腿，捂脸",
						"5秒包了" + m + "个粽子，超音速包粽专业户～～双手奉上U趣码一张！",
						"5秒包了" + m + "个粽子？！你一定是开挂了吧～～",
						] 
				}

	$(document).ready(function () {
		
		var $windowWidth = $(window).width();
		$("html").css( "font-size" ,( 100 / 320 ) * $windowWidth + "px" );

		$(window).resize(function(){
			$windowWidth = $(window).width();
			$("html").css( "font-size" ,( 100 / 320 ) * $windowWidth + "px" );
		});

	});

	$index.click(function(){
		gameStart();
	});

	$leftHandBtn.on("touchstart",function(){
		acting();
	});

	$rightHandBtn.on("touchstart",function(){
		acting();
	});

	$ufuncodeBtn.click(function(){
		$page2.removeClass("fadeIn");
		$main.animate({"-webkit-transform":"translateY(-10.08rem)"},1000,"ease",function(){

			$page3.addClass("fadeIn");

		});
	});

	$shareBtn.click(function(){
		$shareCover.css("display","block");
	});
	$shareCover.click(function(){
		$(this).css("display","none");
	});

	$againBtn.click(function(){
		$page3.removeClass("fadeIn");
		$main.animate({"-webkit-transform":"translateY(-0rem)"},500,"ease",function(){

			$page1.addClass("fadeIn");
			$cover.css("display","block");
			time5000 = 5000;
			$second.html( parseInt( time5000 / 1000 ) );
			$msecond.html( time5000 % 1000 / 100  );
			inCoverText = 3;
			$inCover.html(inCoverText);
			lock = 1;
			count = 0;
			$timer.css({"-webkit-transform":"translateX(" + count / 60 * 100 + "%)"});
			gameStart();


		});
	});

	function gameStart(){

			$index.css("display","none");
			$main.css("display","block");
			$cover.css("display","block");

			setTimeout(function(){

				$page1.addClass("fadeIn");

			},200);

			var timer3 = setInterval(function(){

				inCoverText -- ;
				$inCover.html(inCoverText);

			},1000);

			setTimeout(function(){

				clearInterval(timer3);
				$cover.css("display","none");
				var timer5 = setInterval(function(){

					time5000 = time5000 - 100;
					console.log( time5000 , parseInt( time5000 / 1000 ) ,time5000 %1000 / 100 );
					$second.html( parseInt( time5000 / 1000 ) );
					$msecond.html( time5000 % 1000 / 100 );

					if(time5000 === 0){

						clearInterval(timer5);
						lock = 0;
						$page1.removeClass("fadeIn");
						$main.animate({"-webkit-transform":"translateY(-5.04rem)"},1000,"ease",function(){

							$page2.addClass("fadeIn");
							whatTheText(count);

						});
					}
				},100);
				
			},3000);
		}

	function whatTheText(n){

		var sText = new OverText(n);
		console.log(sText);
		if( n >= 60 ){
			$text.html(sText.mytext[5]);
		}else if( n >= 43 ){
			$text.html(sText.mytext[4]);			
		}else if( n >= 33 ){
			$text.html(sText.mytext[3]);
		}else if( n >= 21 ){
			$text.html(sText.mytext[2]);
		}else if( n >= 1){
			$text.html(sText.mytext[1]);
		}else{
			$text.html(sText.mytext[0]);			
		}
	}

	function acting(){

		if(lock){
			count ++;
			console.log(count);
			$timer.css({"-webkit-transform":"translateX(" + count / 60 * 100 + "%)"});
		}

	}
	window.onload = function(){
		$loading.css("display","none"); 
	}
	</script>
</body>
</html>